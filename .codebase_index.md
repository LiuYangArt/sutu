# PaintBoard Codebase Index

> 最后更新：2026-02-16
> 用途：给 AI/开发者快速定位代码，减少全仓库扫描成本。

## 1. 仓库顶层

| 路径                      | 说明                                              |
| ------------------------- | ------------------------------------------------- |
| `src/`                    | 前端 React + TypeScript 主代码                    |
| `src/gpu/`                | WebGPU 主绘画/合成链路（GPU-first）               |
| `src/components/Canvas/`  | 画布核心组件与交互逻辑                            |
| `src/stores/`             | Zustand 状态管理                                  |
| `src-tauri/`              | Rust 后端（输入、命令、文件 I/O）                 |
| `src-tauri/src/core/`     | 跨端共享 Rust Core（contracts/assets/formats）    |
| `docs/`                   | 架构、计划、复盘与路线图文档                      |
| `tests/` / `e2e/`         | 自动化测试                                        |
| `.github/ISSUE_TEMPLATE/` | GitHub Issue 模板（Bug Report / Feature Request） |

## 2. GPU 主链路关键模块（GPU-first 已收口）

| 路径                                           | 作用                           |
| ---------------------------------------------- | ------------------------------ |
| `src/gpu/GPUStrokeAccumulator.ts`              | 实时笔触累积（active scratch） |
| `src/gpu/layers/GpuLayerStore.ts`              | 图层 tile 纹理存储             |
| `src/gpu/layers/TileResidencyManager.ts`       | tile 常驻预算与回收            |
| `src/gpu/layers/GpuStrokeCommitCoordinator.ts` | 笔触 commit 与历史协调         |
| `src/gpu/layers/GpuStrokeHistoryStore.ts`      | GPU 脏 tile 历史               |
| `src/gpu/layers/GpuCanvasRenderer.ts`          | 多层 tile 合成与显示           |
| `src/gpu/layers/exportReadback.ts`             | 导出/截图 readback 路径        |
| `src/gpu/shaders/*.wgsl`                       | 计算/合成 shader               |

## 3. 文档导航

| 路径                                                    | 用途                                          |
| ------------------------------------------------------- | --------------------------------------------- |
| `AGENTS.md`                                             | 协作约定与高层架构摘要                        |
| `docs/design/done/2026-02-05-gpu-first-brush-design.md` | GPU-first 改造归档（M5 主链路收尾与验收记录） |
| `docs/architecture.md`                                  | 系统架构说明（长期文档）                      |
| `docs/plans/2026-02-15-ipad-native-a-route-plan.md`    | iPad A 路线主计划（含复用矩阵与拆分评估）    |
| `docs/plans/2026-02-15-ipad-core-contracts-phase0.md`  | Core 契约冻结文档                             |
| `docs/testing/cross-platform-core-consistency-v1.md`   | 跨端一致性判定口径                            |
| `docs/todo/development-roadmap.md`                      | 当前产品路线图（M0~M7，含已完成项）           |
| `docs/postmortem/`                                      | 缺陷复盘与经验沉淀                            |

## 4. 常用命令

| 命令                | 用途     |
| ------------------- | -------- |
| `pnpm dev`          | 本地开发 |
| `pnpm -s typecheck` | 类型检查 |
| `pnpm -s test`      | 单元测试 |
| `pnpm check:all`    | 全量检查 |

## 5. 读取建议

1. 先看 `docs/todo/development-roadmap.md` 了解当前阶段与未完成项。
2. 再看 `AGENTS.md` 与本索引定位模块。
3. 涉及跨端复用/iPad 路线时，优先看 `docs/plans/2026-02-15-ipad-native-a-route-plan.md` 与 `src-tauri/src/core/*`。
4. 需要追溯 GPU 改造决策时，再看 `docs/design/done/2026-02-05-gpu-first-brush-design.md`。
