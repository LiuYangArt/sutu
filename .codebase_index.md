# PaintBoard Codebase Index

> 最后更新：2026-02-07  
> 用途：给 AI/开发者快速定位代码，减少全仓库扫描成本。

## 1. 仓库顶层

| 路径 | 说明 |
| --- | --- |
| `src/` | 前端 React + TypeScript 主代码 |
| `src/gpu/` | WebGPU 主绘画/合成链路（GPU-first） |
| `src/components/Canvas/` | 画布核心组件与交互逻辑 |
| `src/stores/` | Zustand 状态管理 |
| `src-tauri/` | Rust 后端（输入、命令、文件 I/O） |
| `docs/` | 架构、计划、复盘与路线图文档 |
| `tests/` / `e2e/` | 自动化测试 |

## 2. GPU-first 关键模块

| 路径 | 作用 |
| --- | --- |
| `src/gpu/GPUStrokeAccumulator.ts` | 实时笔触累积（active scratch） |
| `src/gpu/layers/GpuLayerStore.ts` | 图层 tile 纹理存储 |
| `src/gpu/layers/TileResidencyManager.ts` | tile 常驻预算与回收 |
| `src/gpu/layers/GpuStrokeCommitCoordinator.ts` | 笔触 commit 与历史协调 |
| `src/gpu/layers/GpuStrokeHistoryStore.ts` | GPU 脏 tile 历史 |
| `src/gpu/layers/GpuCanvasRenderer.ts` | 多层 tile 合成与显示 |
| `src/gpu/layers/exportReadback.ts` | 导出/截图 readback 路径 |
| `src/gpu/shaders/*.wgsl` | 计算/合成 shader |

## 3. 文档导航

| 路径 | 用途 |
| --- | --- |
| `CLAUDE.md` | 协作约定与高层架构摘要 |
| `docs/plans/2026-02-05-gpu-first-brush-design.md` | GPU-first 执行计划与里程碑进度 |
| `docs/architecture.md` | 系统架构说明（长期文档） |
| `docs/todo/development-roadmap.md` | 产品路线图（与 plan 里程碑编号不同） |
| `docs/postmortem/` | 缺陷复盘与经验沉淀 |

## 4. 常用命令

| 命令 | 用途 |
| --- | --- |
| `pnpm dev` | 本地开发 |
| `pnpm -s typecheck` | 类型检查 |
| `pnpm -s test` | 单元测试 |
| `pnpm check:all` | 全量检查 |

## 5. 读取建议

1. 先看 `docs/plans/2026-02-05-gpu-first-brush-design.md` 了解当前真实状态。
2. 再看 `CLAUDE.md` 与本索引定位模块。
3. 最后按需精读目标文件，避免一次性读取大文件。
